---
import Navbar from "../components/Navbar.astro";
import "../styles/global.css";
import { ClientRouter } from "astro:transitions";

interface Props {
  title?: string;
  description?: string;
  ogImage?: string;
}
const {
  title = "AstroFoundation",
  description = "A breathtaking Astro starter with modern 2025 UI, semantic structure, and silky view transitions.",
  ogImage,
} = Astro.props;

const canonical = Astro.site ? new URL(Astro.url.pathname, Astro.site) : undefined;
---

<html lang="en" transition:name="root" transition:animate="none">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>{title}</title>
    <meta name="description" content={description} />

    {canonical && <link rel="canonical" href={canonical} />}

    <meta name="theme-color" content="#0b0d12" />
    <meta name="generator" content={Astro.generator} />

    <!-- Social (safe defaults) -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    {canonical && <meta property="og:url" content={canonical} />}
    {ogImage && <meta property="og:image" content={ogImage} />}

    <!-- Enable view transitions + client-side routing -->
    <ClientRouter fallback="animate" />
  </head>

  <body>
    <div class="bgfx" aria-hidden="true"></div>

    <Navbar />

    <main id="main" class="main" transition:animate="slide">
      <slot />
    </main>

    <footer class="footer">
      <div class="container footer__grid">
        <div class="footer__brand">
          <p class="footer__logo">
            <span class="mono">✦</span> Astro<span class="accent">Foundation</span>
          </p>
          <p class="muted">
            Built for speed, clarity, and delight — using Astro’s strengths: content-first, islands when needed,
            and modern CSS.
          </p>
        </div>

        <div class="footer__links">
          <p class="footer__title">Explore</p>
          <a href="/">Home</a>
          <a href="/about">About</a>
          <a href="/contact">Contact</a>
        </div>

        <div class="footer__links">
          <p class="footer__title">Toolbox</p>
          <a href="https://docs.astro.build/en/reference/" target="_blank" rel="noreferrer">Astro Docs</a>
          <a href="https://developer.mozilla.org/" target="_blank" rel="noreferrer">MDN</a>
          <a href="https://web.dev/" target="_blank" rel="noreferrer">Web.dev</a>
        </div>
      </div>

      <div class="container footer__bottom">
        <span class="muted">© {new Date().getFullYear()} AstroFoundation</span>
        <span class="muted mono">ship • iterate • delight</span>
      </div>
    </footer>

    <!-- Example: re-init scripts after navigation -->
    <script is:inline>
      document.addEventListener("astro:page-load", () => {
        // Put any per-page JS init here (analytics, widgets, etc.)
      });
    </script>
  </body>
</html>

<style>
  .main{
    min-height: calc(100vh - var(--header-h));
  }

  .footer{
    padding-block: var(--space-10);
    border-top: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(var(--surface), .25), rgba(var(--surface-2), .25));
  }

  .footer__grid{
    display: grid;
    grid-template-columns: 1.4fr .8fr .8fr;
    gap: var(--space-8);
    align-items: start;
  }

  .footer__logo{
    margin: 0;
    font-weight: 850;
    letter-spacing: -.02em;
    font-size: var(--step-1);
  }

  .footer__title{
    margin: 0 0 .6rem;
    font-weight: 750;
    letter-spacing: .01em;
  }

  .footer__links{
    display: grid;
    gap: .55rem;
    align-content: start;
  }

  .footer__links a{
    color: rgba(var(--text), .86);
  }

  .footer__links a:hover{
    color: rgb(var(--text));
    text-decoration: none;
  }

  .footer__bottom{
    margin-top: var(--space-8);
    padding-top: var(--space-6);
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: var(--space-4);
  }

  @media (max-width: 860px){
    .footer__grid{ grid-template-columns: 1fr; gap: var(--space-7); }
  }
</style>
